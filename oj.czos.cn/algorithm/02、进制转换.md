# 第2章进制转换

## 2.1 N进制和10进制互转

### 一、进制的基础知识

1、什么是进制？
进制也就是进位计数制， 是人为定义的带进位的计数方法。 对于任何一种进制X进制，就表示每一位置上的数运算时都是逢X进 位。十进制是逢十进一， 十六进制是逢十六进一,二进制就是逢二进一，以此类推， x进制就是逢x进位。
 2、生活中常见的进制有哪些？
10进制、60进制、12进制、24进制等；
3、n进制如何数数？
10进制：0 1 2 3 4 5 6 7 8 9 10 11 ..........
2 进制：0 1 10 11 100 101 1111 1000 1001 1010 1011 1100 1101 1110 1111  10000.....
8进制：0 1 2 3 4 5 6 7 10 11 12 13 14 15 16 17 20 21.....
16进制：0 1 2 3 4 5 6 7 8 9 A B C D E F 10 11 12 13 14 15 16 17 18 19 1A 1B 1C 1D 1E 1F 20.........

### 二、十进制转换为R进制

1、十进制整数转换成R进制的整数：_除R取余法_。
2、学习技巧：可以参照短除法， 短除法的作用是用来拆出10进制n 的每一位，可以理
解为10进制转10进制，使用的方法是除 10 取余，然后倒过来；
那么10进制转R进制， 自然就是除R取余，然后倒过来；

![20220608](02%E3%80%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2/20220608.png)

3、课堂练习
(12)10=(    )2
(126)10=(     )8
(258)10=(      )16

### 三、R进制转换为十进制

1、R进制转10进制整数：按权展开。
**按权展开**：基数为N的数字， 只要将各位数字与它的权相乘，其积相加， 和数就是十进
制数。
2、学习技巧：_ 可以参照10进制整数计算机制来学习
$$
12345=5 * 1 + 4 * 10 + 3 *100+2 * 1000+1*10000  \\
=5*10^0+4*10^1+3*10^2+2*10^3+1*10^4
$$
3、课堂练习
R 进制转 10 进制实例：
$$
(1100)2=0X2^0+0X2^1+1X2^2+1X2^3 = (12)10\\
(3506)8=6X8^0+0x8^0+5x8^0+3X8^0 =(1862) 10\\
(1A)16=10*16^0+1*16^1= (26)10
$$
4、作业练习
(110011)2=(   )10
(267)8=(  )10
(2AF)16 =(  )10



### 四、10进制和R进制互转程序实现
1108:【入门】 正整数N转换成一个二进制数
定义字符串存储N转换的二进制数

|      |      |      |      |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |

```CPP
用短除法除2取余，将余数逆序存入字符串
/*1108 - 【入门】正整数N转换成一个二进制数
题目描述
输入一个不大于32767的整数n，将它转换成一个二进制数。

输入
输入只有一行，包括一个整数n(0<=n<=32767)

输出
输出只有一行。

样例
输入
100
输出
1100100
来源
字符串 进制转换

标签
字符串进制转换
*/
#include <bits/stdc++.h>
using namespace std;
string s;  // s = "1010"
int n, x;
char c;
int main() {
  cin >> n;
  while (n != 0) {
    x = n % 2;  // x:0,1
    c = x + '0';
    //结果逆序连接为字符串
    s = c + s;
    n = n / 2;
  }
  if (s == "")
    cout << 0;
  else
    cout << s;
  return 0;
}
```

1290:【入门】二进制转换十进制

| 1    | 1    | 0    | 1    |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |

思路：从最低位开始(s.size（）-1)，倒过来计算 （按权展开）
	s[i] - ‘0'
	准备变量t表示2的n次方， t=1每循环一次，t=t*2

```CPP
/*1290 - 【入门】二进制转换十进制
题目描述
请将一个25位以内的2进制正整数转换为10进制！

输入
一个25位以内的二进制正整数

输出
该数对应的十进制

样例
输入
111111111111111111111111
输出
16777215
来源
进制转换

标签
进制转换
*/
#include <bits/stdc++.h>
using namespace std;
string s;         //存放二进制
int r, t = 1, i;  // t:表示权重
int main() {
  cin >> s;
  for (i = s.size() - 1; i >= 0; i--) {
    r += (s[i] - '0') * t;
    t *= 2;
  }
  cout << r;
}
```



1289:【入门】正整数n转换为16进制

|      |      |      |      |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |

思路： 除16 取余！
	逆序存储到字符串时要注意：
	整数0~ 9，转换为字符'0'~'9', x+'0'
	整数 10~ 15，转换为字符’A’~'F', x+ 'A'-10

```CPP
/*1289 - 【入门】正整数n转换为16进制
题目描述
请从键盘读入一个非负整数n（n是一个不超过18位的非负整数），将n转换为16进制！

注意：16进制即逢16进1，每一位上可以是从小到大为0、1、2、3、4、5、6、7、8、9、A、B、C、D、E、F共16个大小不同的数，即逢16进1，其中用A，B，C，D，E，F这六个字母来分别表示10，11，12，13，14，15。

如：60的十六进制为3C。（字母请用大写）

输入
一个不超过18位的非负整数n

输出
该数的十六进制值

样例
输入
100000000000
输出
174876E800
来源
进制转换

标签
进制转换
*/
//解法一：分别判断 n%16 结果在0~9及 10~15的哪个范围，分别转换为对应的字符
#include <bits/stdc++.h>
using namespace std;
/*
n是一个不超过18位的正整数
*/
long long n, x;
string s;
char c;
int main() {
  cin >> n;
  while (n != 0) {
    x = n % 16;
    // cout<<x<<endl;
    //将x转换为字符逆序存入字符串s
    // x:0~9->'0'~'9'
    // x:10~15-> 'A'~'F'
    if (x < 10) {
      c = x + '0';
    } else {
      c = x + 'A' - 10;
    }
    s = c + s;
    n = n / 16;
  }
  if (s == "") {
    cout << 0;
  } else {
    cout << s;
  }
}
```

解法二： 用字符串存储十六进制对应的字符，简化 16进制转为字符的过程

```CPP
/*解法二： 用字符串存储十六进制对应的字符，简化16 进制转为字符的过程
注意：
int最多表达到2^31-1, 10 位整数；
long long 最多表达到 2^63-1, 19 位整数；*/
#include <bits/stdc++.h>
using namespace std;
long long n, x;  // n是一个不超过18位的正整数
string s;
string t = "0123456789ABCDEF";
int main() {
  cin >> n;
  while (n != 0) {
    x = n % 16;
    // cout<<x<<endl;
    //将x转换为字符逆序存入字符串字符串s
    // x:0~9-> '0'~'9'
    // x:10~15 -> 'A'~'F'
    //将 n%16 转换为字符逆序存入s
    s = t[x] + s;
    n = n / 16;
  }
  if (s == "") {
    cout << 0;
  } else {
    cout << s;
  }
}

```

注意：
	int最多表达到2^31-1,10位整数；
	long long 最多表达到2^63-1,19位整数：



### 1292 - 【入门】十六进制转十进制

| 2    | E    | C    | F    |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |

思路：逆序计算，按权展开！
从s 中获取每一位s[i]是字符， 要转换为实际的整数！
s[i]: '0'~'9', s[i]-'0'
s[i]: 'A'~'F', s[i]-‘A’+10

```CPP
/*1292 - 【入门】十六进制转十进制
题目描述
请将一个不超过10位的十六进制正整数转换为十进制整数！

输入
10位以内的十六进制正整数

输出
该数对应的十进制整数

样例
输入
2ECF
输出
11983
来源
进制转换

标签
进制转换
*/
#include <bits/stdc++.h>
using namespace std;
string s;
// t:表示权重，也就是16的i次方
long long r, t = 1, i;
int main() {
  cin >> s;
  //逆序计算,按权展开
  for (i = s.size() - 1; i >= 0; i--) {
    //如果s[i]是'0'~'9'
    if (isdigit(s[i])) {
      r = r + (s[i] - '0') * t;
    } else {
      r = r + (s[i] - 'A' + 10) * t;
    }
    t = t * 16;
  }
  cout << r;
}
```

```CPP
#include <bits/stdc++.h>
using namespace std;
long long r, i, t = 1;  // t:表示权重，也就是16的i次方
string s, n16 = "0123456789ABCDEF";
int main() {
  cin >> s;
  for (i = s.size() - 1; i >= 0; i--) {  //逆序计算,按权展开
    r += (n16.find(s[i])) * t;
    t = t * 16;
  }
  cout << r;
}
```



#### 1386:【基础】小丽找半个回文数？

a 数组存储 417 对应的各个位

| 7    | 1    | 4    |      |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |

B数组存储417对应 16进制的各个位

| 1    | 10   | 1    |      |      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |

c数组存储417对应2进制的各个位

| 1    | 2    | 3    | 2    | 1    |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    |



经过计算发现，将n拆出每一位装数组 (除10 对 10 取余)
	和将n转为16进制(除16对16取余， 将余数装数组)
	和将n转为2进制(除2对2取余， 将余数装数组)

```CPP
/*1386 - 【基础】小丽找半个回文数？
题目描述
小丽同学在编程中学到了回文数的概念，如果一个数正过来读和反过来读是同一个数，那么这个数就是回文数；比如：2、5、8、66、121、686、12321都是回文数，小丽发现，这样的数不算多。于是小丽有个想法，如果这个数不是回文数，但这个数在2进制或者16进制下是回文数，就算这个整数是半个回文数，比如417并不是回文，但417对应的16进制数是1A1是回文数，因此417算半个回文数。
请你编程帮助小丽找符合条件的半个回文数。

输入
第一行是一个整数n（10<=n<=100）
第二行是n个整数（这些整数都是0~108之间的整数）

输出
所有符合条件的半个回文数，每行一个。

样例
输入
5
121 417 27 100 21
输出
417
27
21
来源
进制转换

标签
进制转换
*/
#include <bits/stdc++.h>
using namespace std;
/*
如果这个数在10进制下不是回文数
但这个数在2进制或者16 进制下是回文数
*/
/*
判断整数n在d进制下是否是回文
除d对d取余数，将余数存入数组， 判断数组是否是回文
*/
bool huiwen(int n, int d) {
  bool r = true;      //假设是回文
  int a[1000] = {0};  //初始化为0，存n转 d进制后的每一位
  int k = 0;
  while (n != 0) {
    a[k] = n % d;
    k++;
    n /= d;
  }
  //判断回文：循环数组长度一半， 判断对称位置是否有不等
  for (int i = 0; i < k / 2; i++) {
    if (a[i] != a[k - i - 1]) {
      r = false;
      break;
    }
  }
  return r;
}
int main() {
  int a[110], n, i;
  cin >> n;
  for (i = 0; i < n; i++) {
    cin >> a[i];
  }
  //遍历每个数，判断是否是半个回文
  for (i = 0; i < n; i++) {
    if (huiwen(a[i], 10) == false &&
        (huiwen(a[i], 2) == true || huiwen(a[i], 16) == true)) {
      cout << a[i] << endl;
    }
  }
}
```

```CPP
  cin >> n;
  for (i = 0; i < n; i++) {
    cin >> x;
    if (huiwen(x, 10) == false &&
        (huiwen(x, 2) == true || huiwen(x, 16) == true)) {
      cout << x << endl;
```

三、可选作业
1288:【入门】正整数n转换为8进制
1291:【入门】八进制转十进制
1405:【基础】小丽找潜在的素数？
1547:【基础】小X转进制
1415:【入门】10进制转D进制



### 2.2二进制和八进制、十六进制互转

一、2、8、16进制的相互转换
1、原理：每位八进制数相当于_3位_二进制数， 每位十六进制数相当于 4位 进制数。在转换时，*中间的 0 不能省略， 开头不够时可以补0*。

![20220611_110617_889](02%E3%80%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2/20220611_110617_889.png)

3、实例： 将16进制数2F78转换为2进制数

![20220611_110654_934](02%E3%80%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2/20220611_110654_934.png)

4、实例：将8进制153转换为2进制

![20220611_110647_689](02%E3%80%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2/20220611_110647_689.png)

5、作业练习
	(137)8=( _ ）2
	(2076)8=( _ )2
	(2AOF)16=( _ )2
	(11110111110110)2=( _ )8
	(11110111110110)2=( _ )16





### 二、2进制、8进制、16进制转换的实现

1294:【基础】二进制转十六进制
(0010 1101 0111 1011)2=(2D7B)16
思路：
判断字符串的长度是否是 4 的倍数，如果不是，则补 0.
s:字符数组

s.size（） %4==1，补3个0
s.size（） %4==2，补2个0
s.size（） %4==3，补1个0

```CPP
/*1294 - 【基础】二进制转十六进制
题目描述
请将一个不超过100位的二进制数转换为十六进制数！

输入
一个不超过100位的二进制整数

输出
该数对应的十六进制数！

样例
输入
11001001111011111000001000010011
输出
C9EF8213
来源
进制转换

标签
进制转换
*/
#include <bits/stdc++.h>
using namespace std;

/*
1.判断字符串长度是否是4的倍数，如果不是补0
2.将每4位的2进制转换为1位的16进制，输出
*/
string s;  //存放2进制
string t = "0123456789ABCDEF";
int main() {
  cin >> s;
  //如果长度不是4的倍数，补0
  // 11010
  if (s.size() % 4 == 1)
    s = "000" + s;
  else if (s.size() % 4 == 2)
    s = "00" + s;
  else if (s.size() % 4 == 3)
    s = "0" + s;

  // cout<<s<<endl;
  //计算
  // 0101,1010
  for (int i = 0; i < s.size(); i = i + 4) {
    //将4位的2进制：s[i] s[i+1] s[i+2] s[i+3]
    //转16进制
    int x = (s[i + 3] - '0') * 1 + (s[i + 2] - '0') * 2 + (s[i + 1] - '0') * 4 +
            (s[i] - '0') * 8;
    cout << t[x];
  }
}
```



#### 1306:【基础】十六进制转二进制

(1A5)16=(0001 1010 0101)2
思路：将每一位的16进制数，转换为4 位的二进制数！
第一步：将每位 16进制转换为4位的2进制， 连接到字符串上！
第二步：删除前导 0, 也就是要从第一个非0开始输出！

```CPP
/*1306 - 【基础】十六进制转二进制
题目描述
请将一个不超过100位的十六进制数转换为二进制数！

输入
一个不超过100位的十六进制整数

输出
该数对应的二进制数！

样例
输入
123456789ABCDEF
输出
100100011010001010110011110001001101010111100110111101111
来源
进制转换

标签
进制转换
*/
#include <bits/stdc++.h>
using namespace std;
string t[16] = {"0000", "0001", "0010", "0011", "0100", "0101", "0110", "0111",
                "1000", "1001", "1010", "1011", "1100", "1101", "1110", "1111"};
int main() {
  // s:存放16进制,r:存放2进制
  string s, r;
  cin >> s;
  // s = "1A5"
  // s[i]转换为0~15之间的整数, 然后再求对应的4位2进制
  int x;
  for (int i = 0; i < s.size(); i++) {
    //如果是0~9
    if (isdigit(s[i])) {
      x = s[i] - '0';
    } else {
      x = s[i] - 'A' + 10;
    }
    // cout<<x<<end1;
    r = r + t[x];
  }
  //删除前导 0
  // 0001101011111
  //当r[0]是'0',则删除
  while (r[0] == '0') {
    r.erase(0, 1);
  }
  if (r == "") {
    cout << 0;
  } else {
    cout << r;
  }
}
```

三、作业
1359:【基础】八进制转换二进制
1293:【基础】二进制转换八进制
1295:【基础】十六进制转换
